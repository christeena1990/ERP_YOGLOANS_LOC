
@{
    if (ViewBag.CustomerBankDetails != null && ViewBag.CustomerBankDetails.Rows.Count > 0)
    {
        <html>
        <head>

            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">

            <link rel="stylesheet" href="~/Content/input_styles.css" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
            <script src="~/Scripts/jquery-3.6.0.min.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> <!-- Ensure Font Awesome is included -->

            <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.0.0/pdf.min.js"></script>

            <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>

            <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
            <style>

                .widget-heading {
                    color: darkred; /* Sets text color */
                    font-size: 16px;
                }

                .widget-subheading1 {
                    /*font-weight: 1500;*/
                    /* opacity: 1000;*/
                    color: darkblue;
                    /* font-weight: bold;*/
                    font-size: 16px;
                }

                #example {
                    overflow-y: auto;
                    font-size: 10px;
                    /*  width: 100%;*/
                    font-weight: 700;
                    color: black;
                    /* border-collapse: collapse;*/
                }

                    #example th, #example td {
                        /*     border: 1px solid #ccc;*/
                        padding: 0px;
                        text-align: left;
                    }

                    #example th {
                        background-color: #4D759A;
                        color: white;
                        font-size: 10px;
                    }

                #selectedRowTable {
                    overflow-y: auto;
                    font-size: 11px;
                    color: black;
                    width: 100%;
                    font-weight: 500;
                    border-collapse: collapse;
                }

                    #selectedRowTable th, #selectedRowTable td {
                        border: 1px solid #ccc;
                        padding: 0px;
                        text-align: center;
                    }

                    /* Styling for table header */
                    #selectedRowTable th {
                        background-color: #4D759A;
                        color: white;
                    }
            </style>
            <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        const checkboxes = document.querySelectorAll('.select-checkbox');
                        const selectedRowTable = document.getElementById('selectedRowTable');
                        const selectedRowContainer = document.getElementById('selectedRowContainer');

                        checkboxes.forEach(function (checkbox) {
                            checkbox.addEventListener('change', function () {
                                if (this.checked) {
                                    // Uncheck other checkboxes
                                    checkboxes.forEach(function (otherCheckbox) {
                                        if (otherCheckbox !== checkbox) {
                                            otherCheckbox.checked = false;
                                        }
                                    });

                                    // Get the row associated with this checkbox
                                    const row = this.closest('tr');
                                    const rowData = Array.from(row.querySelectorAll('td')).map(td => td.innerText);

                                    const cus_name = rowData[1];
                                    // alert("name" + cus_name);
                                    const cus_id = rowData[2];
                                    const issueNo = rowData[3];
                                    const cirtificateNo = rowData[4];
                                    const amount = rowData[5];
                                    const int_rate = rowData[6];
                                    const int_type = rowData[7];
                                    const AllotmentDt = rowData[8];
                                    const MaturityDt = rowData[9];
                                    const deb_id = rowData[12]; // Get value from 5th column (index 4)
                                    const period = rowData[14];
                                    const settl_type = rowData[16];
                                    const close_type = rowData[17];

                                    // Clear the selected row table content
                                    selectedRowTable.querySelector('thead tr').innerHTML = '';
                                    selectedRowTable.querySelector('tbody tr').innerHTML = '';

                                    // Get the headers from the original table
                                    const originalTableHeaders = document.querySelectorAll('#example th');
                                    originalTableHeaders.forEach((th, index) => {
                                        if (index > 0) { // Skip the "Select" column header
                                            const newTh = document.createElement('th');
                                            newTh.textContent = th.textContent;
                                            selectedRowTable.querySelector('thead tr').appendChild(newTh);
                                        }
                                    });

                                    // Populate the selected row table
                                    rowData.forEach((data, index) => {
                                        if (index > 0) { // Skip the "Select" column data
                                            const newTd = document.createElement('td');
                                            newTd.textContent = data;
                                            selectedRowTable.querySelector('tbody tr').appendChild(newTd);
                                        }
                                    });

                                    // Show the selected row container and other elements
                                    selectedRowContainer.style.display = 'block';


                                    // textfill(bond_id);
                                    $.ajax({
                                        url: '/NCD_Settlment_Sanction/textBox_fill',
                                        type: 'POST',  // Use the correct HTTP method (GET, POST, etc.)
                                        contentType: 'application/json',
                                        data: JSON.stringify({ deb_id: deb_id, close_type: close_type }),  // Pass the value as data
                                        success: function (response) {
                                            if (!response.success) {
                                                // alert(response.message);

                                                Swal.fire({
                                                    title: "",
                                                    text: response.message,
                                                    icon: "error",
                                                    confirmButtonText: "OK"
                                                }).then(() => {
                                                    window.location.reload();
                                                });
                                                //window.location.reload();
                                            }
                                            var data = response.data;
                                            var item = data[0];

                                            //  $('#cus_id').val(cus_id);
                                            document.getElementById('settl_type').innerText = settl_type;
                                            document.getElementById('cus_id').innerText = cus_id;
                                            document.getElementById('cus_name').innerText = cus_name;
                                            document.getElementById('issueNo').innerText = issueNo;
                                            document.getElementById('cirtificateNo').innerText = cirtificateNo;
                                            document.getElementById('int_rate').innerText = int_rate;
                                            document.getElementById('int_type').innerText = int_type;
                                            document.getElementById('AllotmentDt').innerText = AllotmentDt;
                                            document.getElementById('MaturityDt').innerText = MaturityDt;
                                            document.getElementById('period').innerText = period;
                                            document.getElementById('amount').innerText = amount;



                                            document.getElementById('interstamt').innerText = data[0].interstamt;

                                            document.getElementById('eranint').innerText = data[0].eranint;

                                            document.getElementById('tot_tds').innerText = data[0].tot_tds;
                                            document.getElementById('payamt').innerText = data[0].payamt;
                                            document.getElementById('balpay').innerText = data[0].balpay;


                                            document.getElementById('maturity_amount').innerText = data[0].maturity_amount;
                                            document.getElementById('lasttds').innerText = data[0].lasttds;
                                            document.getElementById('short_recovery').innerText = data[0].short_recovery;
                                            document.getElementById('pantrack').innerText = data[0].pantrack;

                                            document.getElementById('settpay').innerText = data[0].settpay;
                                            document.getElementById('final_sett_Amount').innerText = data[0].settpay;
                                            document.getElementById('pre_closing_int_rate').innerText = data[0].pre_intrate;
                                            document.getElementById('pre_closing_int').innerText = data[0].preamount; 
                                            if (data[0].pre_intrate != null)
                                            {

                                               
                                                $("#premature_intRate_div").show();
                                            }
                                             if (data[0].preamount != null)
                                            {
                                                $("#premature_int_div").show();
                                            }
                                           



                                            $("#example_div").hide();
                                            $("#textBpx_details_div").show();
                                            $("#buttonDiv").show();


                                        },
                                        error: function (error) {
                                            console.error("Error:", error);
                                            // Handle any errors
                                        }
                                    });
                                    checkPanOrForm60Status()
                                } else {
                                    // Clear the selected row table if no checkbox is checked
                                    selectedRowTable.querySelector('thead tr').innerHTML = '';
                                    selectedRowTable.querySelector('tbody tr').innerHTML = '';
                                    selectedRowContainer.style.display = 'none';
                                }
                            });
                        });
                    });

                    function checkPanOrForm60Status() {
                        $.ajax({
                            url: '/NCD_Settlment_Sanction/panORform60_status', // Replace with your actual controller name
                            type: 'POST',
                            dataType: 'json',
                            success: function (response) {
                                if (response.success) {
                                    //    alert("Status check successful.");
                                    var data = response.data;
                                    var item = data[0];
                                    document.getElementById('panorform60_status').innerText = data[0].panorform60_type;
                                    document.getElementById('type_form').innerText = data[0].type_form;
                                    document.getElementById('idno').innerText = data[0].idno;
                                  //  alert(data[0].return_reason);

                                    if (data[0].return_reason != null && data[0].return_reason.trim() !== "") {
                                       // alert("not null");
                                        $("#return_reason_div").show();
                                        document.getElementById('return_reason_label').innerText = data[0].return_reason;
                                    } else {
                                       // alert("null");
                                        $("#return_reason_div").hide();
                                    }


                                } else {
                                    console.log("Status check failed.");
                                    // Handle failure logic here
                                }
                            },
                            error: function (xhr, status, error) {
                                console.error("Error occurred:", error);
                                // Handle error logic here
                            }
                        });
                    }

                    $(document).ready(function () {

                        $('#requestButton').click(function () {

                            var maturity_amount = $('#maturity_amount').text();
                            var settl_Amt = $('#settpay').text();
                            var bal = document.getElementById('balanceInput').value;
                            var limit = maturity_amount - settl_Amt;
                            if (limit < 0) {
                                limit = 0;
                            }
                            if (bal > limit) {
                                alert("Balance amount is exceeded");
                                document.getElementById('balanceInput').value = '';
                                alert(settl_Amt);
                                document.getElementById('final_sett_Amount').innerText = settl_Amt.toFixed(2); // Do not add the balance
                                return false;
                            }

                          //  MaturityDt
                            var MaturityDt = $('#MaturityDt').text();
                            var total_int = $('#interstamt').text();
                            var tot_tds = $('#tot_tds').text();
                            var total_paidamt = $('#payamt').text();
                            var total_payable = $('#balpay').text();
                            var tot_eranint = $('#eranint').text();
                            var lasttds = $('#lasttds').text();
                            var short_recovery = $('#short_recovery').text();
                           /* var panData = $('#pan').text();*/
                            var trid = $('#trid').text();

                            var pre_closing_int_rate = $('#pre_closing_int_rate').text();
                            var pre_closing_int = $('#pre_closing_int').text();
                          //  var trid = $('#trid').text();




                                $.ajax({
                                    url: '/NCD_Settlment_Sanction/requestBtn_click', // replace with your endpoint
                                    type: 'POST',
                                    data: {
                                         settl_Amt: settl_Amt, total_int: total_int, tot_tds: tot_tds,
                                        total_paidamt: total_paidamt, total_payable: total_payable, tot_eranint: tot_eranint,
                                        lasttds: lasttds, short_recovery: short_recovery, trid: trid, bal: bal, MaturityDt: MaturityDt,
                                        pre_closing_int_rate: pre_closing_int_rate, pre_closing_int: pre_closing_int
                                    },
                                    success: function (response) {
                                        if (response.success) {
                                            // alert("success");
                                            //  alert(response.data);
                                            Swal.fire({

                                                title: response.data,
                                                /* text: result.message,*/
                                                text: "",
                                                icon: "success",
                                                confirmButtonText: "OK"
                                            }).then(() => {
                                                window.location.reload();

                                            });

                                        }
                                        else {

                                            Swal.fire({
                                                title: "",
                                                text: response.data,
                                                icon: "error",
                                                confirmButtonText: "OK"

                                            });
                                        }
                                    },
                                    error: function (xhr, status, error) {
                                        // Handle error
                                        console.error('Error:', error);
                                    }
                                });

                        });
                    });



                    function reloadPage() {
                        // Reload the page
                        location.reload();
                    }


                    // Function to calculate the sum
                    function calculateSum() {
                        // Get the settled amount
                        const settledAmount = parseFloat(document.getElementById('settpay').innerText) || 0;

                        // Get the balance amount from the input field
                        const balanceAmount = parseFloat(document.getElementById('balanceInput').value) || 0;

                        // Calculate the final amount
                        const finalAmount = settledAmount + balanceAmount;

                        // Display the final amount in the final_sett_Amount div
                        document.getElementById('final_sett_Amount').innerText = finalAmount.toFixed(2);
                    }

                    // Initialize on page load
                    document.addEventListener('DOMContentLoaded', function () {

                        // Set the balance input value to 0 if it is empty
                        const balanceInput = document.getElementById('balanceInput');
                        if (!balanceInput.value || parseFloat(balanceInput.value) === 0) {
                            balanceInput.value = 0; // Ensure balance is set to 0
                        }

                        // Call calculateSum to initialize the final amount
                        calculateSum();
                    });
                    function validateInput(event) {
                        // Remove non-numeric characters
                        event.target.value = event.target.value.replace(/[^0-9]/g, '');
                    }


                    function showReject(action) {
                       // alert("reject");
                        Swal.fire({
                            title: "Reason for " + action + ":",
                            input: "text",
                            showCancelButton: false,
                            confirmButtonText: "OK",
                            //cancelButtonText: "Cancel",
                            preConfirm: (rejectReason) => {
                                if (!rejectReason || rejectReason.trim() === "") {
                                    Swal.showValidationMessage("Please enter a valid reason.");
                                    return false; // prevent closing the dialog
                                } else {
                                    // Perform the RejectCustomer action when the user clicks "OK"
                                    $.ajax({
                                        url: '/NCD_Settlment_Sanction/Reject_click',
                                        type: 'POST',
                                        data: { rejectReason: rejectReason },
                                        success: function (data) {
                                            // Handle success response from the server if needed
                                            Swal.fire(
                                                "Rejected Successfully..",
                                                "Reason for " + action + ": " + rejectReason,
                                                "success"
                                            ).then(() => {
                                                // Redirect to the approval list after showing the success message
                                                window.location.reload();
                                            });
                                        },
                                        error: function (xhr, textStatus, errorThrown) {
                                            // Handle error response from the server if needed
                                            Swal.fire(
                                                "Error",
                                                "Failed to submit reason. Please try again.",
                                                "error"
                                            );
                                        }
                                    });
                                }
                            }
                        });
                    }
                    function rejectClick() {
                        $.ajax({
                            url: '/NCD_Settlment_Sanction/Reject_click', // Replace 'YourController' with your controller name
                            type: 'POST',
                            dataType: 'json',
                            success: function (response) {
                                if (response.success) {
                                    // alert("success");
                                    //  alert(response.data);
                                    Swal.fire({

                                        title: response.data,
                                        /* text: result.message,*/
                                        text: "",
                                        icon: "success",
                                        confirmButtonText: "OK"
                                    }).then(() => {
                                        window.location.reload();

                                    });

                                }
                                else {

                                    Swal.fire({
                                        title: "",
                                        text: response.data,
                                        icon: "error",
                                        confirmButtonText: "OK"

                                    });
                                }
                            },
                            error: function () {
                                alert('An error occurred while processing your request.');
                            }
                        });
                    }



            </script>
        </head>
        <body>
            <div id="mediaModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; padding-top: 50px; background-color: rgba(0,0,0,0); z-index: 1000;">
                <div id="mediaModalContent" style="position: relative; cursor: move; margin: auto; padding: 40px; width: 60%; height: 90%; ">
                    <div id="pdfViewer" style="width: 100%; cursor: move; height: calc(100% - 40px);"></div>

                    @*Zoom Controls*@
                    <div id="zoomControls" style="text-align:center;">

                        <button id="zoomIn" style="margin-right: 10px; background:transparent; border:none; font-size:24px; cursor:pointer;">
                            <i class="fas fa-search-plus"></i>
                        </button>

                        <!-- Zoom Out button with icon -->
                        <button id="zoomOut" style="background:transparent; border:none; font-size:24px; cursor:pointer;">
                            <i class="fas fa-search-minus"></i>
                        </button>
                        <!-- Rotate button with icon -->
                        <button id="rotateImage" style="background:transparent; border:none; font-size:24px; cursor:pointer;">
                            <i class="fas fa-sync-alt"></i>
                        </button>
                    </div>


                    <button onclick="closeModal()" style="position:absolute; top:10px; right:10px; background:transparent; border:none; font-size:24px; cursor:pointer;">
                        <i class="fas fa-times"></i>
                    </button>
                    @*</div>*@
                </div>
            </div>
            <div class="app-main__inner" style="margin-top: -20px;padding:0px;width:100%;">
                <div style="height: 40px; display: flex; align-items: center; justify-content: center;">
                    <div class="card-title">
                        <h6 style="font-weight: bold; font-size: 25px; margin: 0;color:maroon">Settlement sanction</h6>
                    </div>
                </div>
                <div class="main-card mb-3 card" id="example_div">
                    <div class="card-body">
                        <div id="example_wrapper" class="dataTables_wrapper dt-bootstrap4">

                            <div class="row">
                                <div class="col-sm-12">

                                    <table style="width: 100%;" id="example" class="table table-hover table-striped table-bordered dataTable dtr-inline" role="grid" aria-describedby="example_info">
                                        <thead>
                                            <tr>
                                                <th>Select</th> <!-- Selection column header -->
                                                @if (ViewBag.CustomerBankDetails != null && ViewBag.CustomerBankDetails.Columns.Count > 0)
                                                {
                                                    foreach (System.Data.DataColumn column in ViewBag.CustomerBankDetails.Columns)
                                                    {
                                                        <th>@column.ColumnName</th>
                                                    }
                                                }
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (ViewBag.CustomerBankDetails != null && ViewBag.CustomerBankDetails.Rows.Count > 0)
                                            {
                                                foreach (System.Data.DataRow row in ViewBag.CustomerBankDetails.Rows)
                                                {
                                                    <tr>
                                                        <td>
                                                            <input type="checkbox" name="selectedRow" class="select-checkbox" value="@row[0]" /> <!-- Checkbox for selecting the row -->
                                                        </td>
                                                        @foreach (var item in row.ItemArray)
                                                        {
                                                            <td>@item</td>
                                                        }
                                                    </tr>
                                                }
                                            }
                                            else
                                            {
                                                <tr>
                                                    <td colspan="6">No data available</td> <!-- Updated colspan to account for the selection column -->
                                                </tr>
                                            }
                                        </tbody>

                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="overflow-x:auto; max-height: 400px;" id="selectedRowContainer">

                    <table id="selectedRowTable" class="table table-hover table-striped table-bordered">
                        <thead>
                            <tr>
                                <!-- Dynamically fill the column headers -->
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <!-- Dynamically fill the row data -->
                            </tr>
                        </tbody>
                    </table>
                </div>




                @*<div class="main-card mb-1 card" id="return_reason_div" style="font-size:16px;">

                        <h5 style="color:darkgreen;" class="card-title">Return Reason</h5>
                        <div class="vertical-time-simple vertical-without-time vertical-timeline vertical-timeline--animate vertical-timeline--one-column">
                            <div class="vertical-timeline-item dot-danger vertical-timeline-element">
                                <div>
                                    <span class="vertical-timeline-element-icon bounce-in"></span>
                                    <div class="vertical-timeline-element-content bounce-in">
                                        <h4 style="color:red;" id="return_reason_label" class="timeline-title"></h4>
                                    </div>
                                </div>
                            </div>




                        </div>

                    </div>*@





            <div class="card-body" id="textBpx_details_div" style="display:none;width:100%;">
                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">
                                            Settlement Type
                                        </div>
                                        <div id="settl_type" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Maturity Amount</div>
                                        <div id="maturity_amount" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" id="return_reason_div">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Return Reason</div>
                                        <div style="color:darkgreen;" id="return_reason_label" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">
                                            Customer ID
                                        </div>
                                        <div id="cus_id" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Customer Name</div>
                                        <div id="cus_name" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Issue No</div>
                                        <div id="issueNo" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Certificate No</div>
                                        <div id="cirtificateNo" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>



                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Interest Rate:</div>
                                        <div id="int_rate" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Interest Type</div>
                                        <div id="int_type" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">
                                            Allotment
                                            Date
                                        </div>
                                        <div id="AllotmentDt" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">
                                            Maturity
                                            Date
                                        </div>
                                        <div id="MaturityDt" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>



                @*------------------------------------Applicant Details   1st row-------------------------------------------*@
                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Period</div>
                                        <div id="period" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading"> Amount</div>
                                        <div id="amount" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">	Total Interest</div>
                                        <div id="interstamt" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Total Earned   Interest</div>
                                        <div id="eranint" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @*------------------------------------Applicant Details   2st row-------------------------------------------*@
                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Total TDS</div>
                                        <div id="tot_tds" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading"> 	Total Interest Paid</div>
                                        <div id="payamt" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">
                                            Total Payable
                                            Amount
                                        </div>
                                        <div id="balpay" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">	Short recovery</div>
                                        <div id="short_recovery" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                @*------------------------------------Applicant Details   3rd row-------------------------------------------*@
                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">TDS Payable</div>
                                        <div id="lasttds" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">15 track_id</div>
                                        <div id="pantrack" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">
                                            Submited
                                        </div>
                                        <div id="panorform60_status" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading" id="type_form"></div>
                                        <div id="idno" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>





                    </div>
                </div>

                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Total Settled Amount</div>
                                        <div id="settpay" class="widget-subheading1">100</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Balance Amount</div>
                                        <div id="bala_Amount" class="widget-subheading1">
                                            <input type="text" id="balanceInput" class="form-control" placeholder="Enter Balance Amount" oninput="validateInput(event); calculateSum()">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Final Settled Amount</div>
                                        <div id="final_sett_Amount" class="widget-subheading1"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" id="premature_intRate_div" style="display:none;">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Premature closing interest Rate</div>
                                        <div id="pre_closing_int_rate" class="widget-subheading1">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="main-card mb-1 card" style="font-size:16px;">
                    <div class="no-gutters row">

                        <div class="col-md-3" id="premature_int_div" style="display:none;">
                            <div class="widget-content">
                                <div class="widget-content-wrapper">
                                    <div class="widget-content-right ml-0 mr-3">

                                    </div>
                                    <div class="widget-content-left">
                                        <div class="widget-heading">Premature Closing interest</div>
                                        <div id="pre_closing_int" class="widget-subheading1">0</div>
                                    </div>
                                </div>
                            </div>
                        </div>



                    </div>
                </div>
                <div class="card-body" id="buttonDiv" style="display:none;">

                    <div class="text-center">

                        <button id="requestButton" style=" width: 100px;font-size:18px;" class="ladda-button mb-2 mr-2 btn-square btn btn-success" data-style="expand-up">
                            <span class="ladda-label">Request</span>

                            <span class="ladda-spinner"></span><div class="ladda-progress" style="width: 0px;"></div>
                        </button>
                        <button onclick="showReject('Reject')" class="mb-2 mr-2 btn-square btn btn-danger" style=" width: 100px; font-size: 18px;">Reject</button>
                        <button onclick="reloadPage()" style=" width: 100px; font-size: 18px;" class="ladda-button mb-2 mr-2 btn-square btn btn-secondary" data-style="expand-right">
                            <span class="ladda-label">Cancel</span>

                            <span class="ladda-spinner"></span>
                        </button>
                    </div>
                </div>
            </div>
            </div>
        </body>
    </html>
}
else
            {
                <h3>   No Document Available</h3>
            }

}


